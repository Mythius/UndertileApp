<!DOCTYPE html>
<html>
    <head>
        <title>Decoder</title>
        <link rel=stylesheet href=style.css>
        <style>
            input,button{
                float:left;   
            }
        </style>
    </head>
    <body>
        <div id=game></div>
        <input><br><br><button>Enter</button>
        <script>
            function obj(id){return document.querySelector(id);}
            var a=obj('div');
            var levcode;
            for(let i=0;i<120;i++){
                var e=document.createElement('div');
                e.classList.add('tile');
                a.appendChild(e);
            }
            obj('button').addEventListener('click',function(){
                levcode=obj('input').value;
                add();
            });
            function pos(x,y){
                return y*15-16+x;   
            }
            function ex(){
                var cols=[];
                for(let i=0;i<tile.length;i++){
                    if(tile[i].style.backgroundColor==''){
                        tile[i].style.backgroundColor='green';   
                    }
                }
                for(let i=0;i<tile.length;i++){
                    cols.push(tile[i].style.backgroundColor);  
                }
                var code='';
                for(let i=0;i<cols.length;i++){
                    code+=c2.indexOf(cols[i]);
                }
                console.log(code);
            }
            var tile=document.getElementsByClassName('tile');
            var colors=['white','red','blue','green','#faf','yellow','orange','purple'];
            var c2=['red','blue','yellow','purple','green','orange','rgb(255, 170, 255)'];
            function setTile(x,y,n){
                tile[pos(x,y)].style.backgroundColor=colors[n];
            }
            function add(){
                var t=0;
                for(let y=1;y<9;y++){
                    for(let x=5;x<16;x++){
                        setTile(x,y,Number(levcode[t]));
                        t++;
                    }
                }                    
            }
            function setup(){
                setTile(1,1,7);
                setTile(1,2,7);
                setTile(1,3,7);
                setTile(1,4,7);
                setTile(2,4,7);
                setTile(3,4,7);
                setTile(4,4,2);
                setTile(1,5,1);
                setTile(4,3,1);
                setTile(4,5,1);
                setTile(2,1,1);
                setTile(4,1,1);
                setTile(4,2,1);
                setTile(4,3,1);
                setTile(4,6,1);
                setTile(4,7,1);
                setTile(4,8,1);
            }
            setup();
            document.addEventListener('keydown',function(e){
                if(e.keyCode==69){
                    ex();   
                }
            });
        </script>
    </body>
</html>